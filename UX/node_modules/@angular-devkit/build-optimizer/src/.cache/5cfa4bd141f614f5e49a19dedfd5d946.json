{"remainingRequest":"D:\\Imp\\Learn\\SMBSweb\\UX\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--8-1!D:\\Imp\\Learn\\SMBSweb\\UX\\node_modules\\ag-grid\\dist\\lib\\rendering\\heightScaler.js","dependencies":[{"path":"D:\\Imp\\Learn\\SMBSweb\\UX\\node_modules\\ag-grid\\dist\\lib\\rendering\\heightScaler.js","mtime":1525243699711},{"path":"D:\\Imp\\Learn\\SMBSweb\\UX\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1530947965468},{"path":"D:\\Imp\\Learn\\SMBSweb\\UX\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1528256844000}],"contextDependencies":[],"result":["/**\n * ag-grid - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v17.1.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\nvar __extends = /*@__PURE__*/ require(\"tslib\").__extends;\nvar __decorate = /*@__PURE__*/ require(\"tslib\").__decorate;\nvar __metadata = /*@__PURE__*/ require(\"tslib\").__metadata;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar beanStub_1 = require(\"../context/beanStub\");\nvar context_1 = require(\"../context/context\");\nvar eventService_1 = require(\"../eventService\");\nvar eventKeys_1 = require(\"../eventKeys\");\nvar gridPanel_1 = require(\"../gridPanel/gridPanel\");\nvar utils_1 = require(\"../utils\");\n/**\n * This class solves the 'max height' problem, where the user might want to show more data than\n * the max div height actually allows.\n */\nvar HeightScaler = /*@__PURE__*/ (function (_super) {\n    __extends(HeightScaler, _super);\n    function HeightScaler() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // the scrollY position\n        _this.scrollY = 0;\n        // how tall the body is\n        _this.uiBodyHeight = 0;\n        return _this;\n    }\n    HeightScaler.prototype.postConstruct = function () {\n        this.addDestroyableEventListener(this.eventService, eventKeys_1.Events.EVENT_BODY_HEIGHT_CHANGED, this.update.bind(this));\n        this.scrollBarWidth = utils_1._.getScrollbarWidth();\n        this.maxDivHeight = utils_1._.getMaxDivHeight();\n    };\n    HeightScaler.prototype.isScaling = function () {\n        return this.scaling;\n    };\n    HeightScaler.prototype.getOffset = function () {\n        return this.offset;\n    };\n    HeightScaler.prototype.update = function () {\n        if (!this.scaling) {\n            return;\n        }\n        var newScrollY = this.gridPanel.getPrimaryScrollViewport().scrollTop;\n        var newBodyHeight = this.getUiBodyHeight();\n        var atLeastOneChanged = newScrollY !== this.scrollY || newBodyHeight !== this.uiBodyHeight;\n        if (atLeastOneChanged) {\n            this.scrollY = newScrollY;\n            this.uiBodyHeight = newBodyHeight;\n            this.calculateOffset();\n        }\n    };\n    HeightScaler.prototype.calculateOffset = function () {\n        this.uiContainerHeight = this.maxDivHeight;\n        this.pixelsToShave = this.modelHeight - this.uiContainerHeight;\n        this.maxScrollY = this.uiContainerHeight - this.uiBodyHeight;\n        var scrollPercent = this.scrollY / this.maxScrollY;\n        this.setOffset(scrollPercent * this.pixelsToShave);\n    };\n    HeightScaler.prototype.clearOffset = function () {\n        this.uiContainerHeight = this.modelHeight;\n        this.pixelsToShave = 0;\n        this.setOffset(0);\n    };\n    HeightScaler.prototype.setOffset = function (newOffset) {\n        // because we are talking pixels, no point in confusing things with half numbers\n        var newOffsetFloor = typeof newOffset === 'number' ? Math.floor(newOffset) : null;\n        if (this.offset !== newOffsetFloor) {\n            this.offset = newOffsetFloor;\n            this.eventService.dispatchEvent({ type: eventKeys_1.Events.EVENT_HEIGHT_SCALE_CHANGED });\n        }\n    };\n    HeightScaler.prototype.setModelHeight = function (modelHeight) {\n        this.modelHeight = modelHeight;\n        this.scaling = this.maxDivHeight > 0 && modelHeight > this.maxDivHeight;\n        if (this.scaling) {\n            this.calculateOffset();\n        }\n        else {\n            this.clearOffset();\n        }\n    };\n    HeightScaler.prototype.getUiContainerHeight = function () {\n        return this.uiContainerHeight;\n    };\n    HeightScaler.prototype.getRealPixelPosition = function (modelPixel) {\n        var uiPixel = modelPixel - this.offset;\n        return uiPixel;\n    };\n    HeightScaler.prototype.getUiBodyHeight = function () {\n        var pos = this.gridPanel.getVScrollPosition();\n        var bodyHeight = pos.bottom - pos.top;\n        if (this.gridPanel.isHorizontalScrollShowing()) {\n            bodyHeight -= this.scrollBarWidth;\n        }\n        return bodyHeight;\n    };\n    HeightScaler.prototype.getScrollPositionForPixel = function (rowTop) {\n        if (this.pixelsToShave <= 0) {\n            return rowTop;\n        }\n        else {\n            var modelMaxScroll = this.modelHeight - this.getUiBodyHeight();\n            var scrollPercent = rowTop / modelMaxScroll;\n            var scrollPixel = this.maxScrollY * scrollPercent;\n            return scrollPixel;\n        }\n    };\n    __decorate([\n        context_1.Autowired('eventService'),\n        __metadata(\"design:type\", eventService_1.EventService)\n    ], HeightScaler.prototype, \"eventService\", void 0);\n    __decorate([\n        context_1.Autowired('gridPanel'),\n        __metadata(\"design:type\", gridPanel_1.GridPanel)\n    ], HeightScaler.prototype, \"gridPanel\", void 0);\n    __decorate([\n        context_1.PostConstruct,\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", []),\n        __metadata(\"design:returntype\", void 0)\n    ], HeightScaler.prototype, \"postConstruct\", null);\n    HeightScaler = __decorate([\n        context_1.Bean('heightScaler')\n    ], HeightScaler);\n    return HeightScaler;\n}(beanStub_1.BeanStub));\nexports.HeightScaler = HeightScaler;\n",null]}